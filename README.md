# Evolution Game

A small but well-architected 2D evolution sandbox built with Python, `pygame`, `pymunk`, and `neat-python`. Simple physics-driven creatures learn to move toward a target through neuroevolution.

## Features
- 2D physics world with gravity, boundaries, and obstacles (`pymunk`).
- Creatures controlled by NEAT neural networks.
- Fitness-based evolution over generations with checkpointing/resume support.
- Headless training or visual training via `pygame` rendering.
- Configurable via Pydantic models and optional `config.toml`.

## Installation
```bash
python -m venv .venv
# Windows
.venv\\Scripts\\activate
# Linux/macOS
source .venv/bin/activate

pip install -r requirements.txt
```

## Running the game
Create a configurable TOML you can tweak (optional):
```bash
python -m evo_game.main export-config --path config.toml
```

Train for a few generations (enable `--render` to watch):
```bash
python -m evo_game.main train --generations 10 --render
```

Enable lightweight sensor overlays during rendering when debugging behavior:
```bash
python -m evo_game.main train --render --show-sensors
```

Visualize the best saved genome:
```bash
python -m evo_game.main visualize-best
```

Resume from the most recent checkpoint:
```bash
python -m evo_game.main resume --render
```

## How evolution works
- Each agent is controlled by a small feedforward network generated by NEAT.
- Sensor inputs include distance to the target, vertical offset, velocity, and ground proximity.
- Network outputs translate to horizontal force and jump impulses.
- Fitness rewards progress toward the target and time spent alive; NEAT selects and mutates genomes to improve fitness each generation.

## Customization
- **Fitness function:** edit `Agent.update()` in `src/evo_game/agent.py`.
- **Sensors/actions:** adjust `get_sensor_values()` and the action mapping in `agent.py`, then update `num_inputs`/`num_outputs` in `neat-config.cfg`.
- **World layout:** tweak obstacles, gravity, and target position in `src/evo_game/config.py` or provide a `config.toml`.
- **NEAT settings:** edit `neat-config.cfg` or point `neat_config_path` in `config.py` to another file.

## Project structure
- `src/evo_game/` – core modules (`config`, `world`, `agent`, `simulation`, `render`, `neat_runner`, `cli`).
- `src/main.py` – entry point used by `python -m evo_game.main`.
- `checkpoints/` – checkpoints and best genome files.
- `docs/` – architecture, extension notes, and follow-up ideas.
- `tests/` – pytest-based sanity tests.

## Suggested next steps
See `docs/further_actions.md` for a concise list of improvements to gameplay, sensors, rendering, and tooling that can guide future iterations.


## Installation
```bash
python -m venv .venv
# Windows
.venv\\Scripts\\activate
# Linux/macOS
source .venv/bin/activate

pip install -r requirements.txt
```

## Running the game
Train for a few generations (enable `--render` to watch):
```bash
python -m evo_game.main train --generations 10 --render
```

Visualize the best saved genome:
```bash
python -m evo_game.main visualize-best
```

Resume from the most recent checkpoint:
```bash
python -m evo_game.main resume --render
```

## How evolution works
- Each agent is controlled by a small feedforward network generated by NEAT.
- Sensor inputs include distance to the target, vertical offset, velocity, and ground proximity.
- Network outputs translate to horizontal force and jump impulses.
- Fitness rewards progress toward the target and time spent alive; NEAT selects and mutates genomes to improve fitness each generation.

## Customization
- **Fitness function:** edit `Agent.update()` in `src/evo_game/agent.py`.
- **Sensors/actions:** adjust `get_sensor_values()` and the action mapping in `agent.py`, then update `num_inputs`/`num_outputs` in `neat-config.cfg`.
- **World layout:** tweak obstacles, gravity, and target position in `src/evo_game/config.py` or provide a `config.toml`.
- **NEAT settings:** edit `neat-config.cfg` or point `neat_config_path` in `config.py` to another file.

## Project structure
- `src/evo_game/` – core modules (`config`, `world`, `agent`, `simulation`, `render`, `neat_runner`, `cli`).
- `src/main.py` – entry point used by `python -m evo_game.main`.
- `checkpoints/` – checkpoints and best genome files.
- `docs/` – architecture, extension notes, and follow-up ideas.
- `tests/` – pytest-based sanity tests.

## Suggested next steps
See `docs/further_actions.md` for a concise list of improvements to gameplay, sensors, rendering, and tooling that can guide future iterations.


## Running tests
```bash
pytest
```
